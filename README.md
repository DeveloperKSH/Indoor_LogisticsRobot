# z8015odroid â€” Indoor Logistics Robot Stack (180Â° LiDAR & ROS 2)

ì €ë¹„ìš© ì‹¤ë‚´ ë¬¼ë¥˜ë¡œë´‡ì„ ìœ„í•´ **ì „ë°© 180Â° ë‹¨ì¼ LiDAR**ì™€ **ì‹¤ë‚´ ë§µ ê¸°ë°˜ ììœ¨ì£¼í–‰**ì„ êµ¬í˜„í•œ ROS 2 ìŠ¤íƒì…ë‹ˆë‹¤. ì„¼ì„œ ì„¸íŒ…Â·ë™ê¸°í™”ë¶€í„° SLAM/Localization/Nav2/FSM, Docker/PM2 ìš´ì˜ê¹Œì§€ ì‹¤ì „ ìš´ìš© íë¦„ì„ ê·¸ëŒ€ë¡œ ë‹´ì•˜ìŠµë‹ˆë‹¤.

- **ì—­í• **: 180Â° FOV LiDAR, IMU, Wheel Odomì„ **í•„í„°ë§Â·ìœµí•©**í•˜ì—¬ ì•ˆì •ì ì¸ **ë§µ ìƒì„±/ë¡œì»¬ë¼ì´ì œì´ì…˜/ììœ¨ì£¼í–‰** ìˆ˜í–‰  
- **êµ¬ì„±**: `z8015`(ëª¨í„° ë“œë¼ì´ë²„Â·ì„¼ì„œÂ·ë¸Œë§ì—…), Cartographer/SLAM Toolbox, AMCL, robot_localization(EKF), Nav2(zeta_navigation2), FSM Waypoint, udev rules, Docker/PM2  
- **í™œìš©**: ì°½ê³ /ì‚¬ë¬´ë™/í•™êµ ë“± **ì‹¤ë‚´ ë¬¼ë¥˜ë¡œë´‡**(ì €ê°€í˜• í•˜ë“œì›¨ì–´) í˜„ì¥ íˆ¬ì… ë° ë¹ ë¥¸ ì¬í˜„/í™•ì¥

---

## ğŸ“Œ 1. í•„ìš”í•˜ê²Œ ëœ ìƒí™©

ì‹¤ë‚´ í™˜ê²½ì—ì„œëŠ” GNSSë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ê³ , ì €ê°€í˜• ëª¨ë¸ì¼ìˆ˜ë¡ ì„¼ì„œ êµ¬ì„±ì´ ì œí•œë©ë‹ˆë‹¤.

- LiDAR **1ëŒ€ / ì „ë°© 180Â°** â†’ í›„ë°© ë¯¸ì¸ì§€, ê·¼ì ‘Â·ì°¨ì²´ ë°˜ì‚¬ ë…¸ì´ì¦ˆ  
- í•˜ë“œì›¨ì–´ êµì²´/ë¶€íŒ… ì‹œ **USB ê²½ë¡œ ë³€ë™**, ì„¼ì„œ ì¤€ë¹„ íƒ€ì´ë° ì´ìŠˆ  
- **ì‹¤ë‚´ ë§µ ê¸°ë°˜**ìœ¼ë¡œ ì•ˆì •ì ì¸ ë¡œì»¬ë¼ì´ì œì´ì…˜/ê²½ë¡œì¶”ì¢… ìœ ì§€ í•„ìš”

ğŸ‘‰ ë³¸ ìŠ¤íƒì€ ìœ„ ì œì•½ì„ **ì†Œí”„íŠ¸ì›¨ì–´ ì•„í‚¤í…ì²˜Â·í•„í„°ë§Â·ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜**ìœ¼ë¡œ ë³´ì™„í•´ **í˜„ì¥ ì‹ ë¢°ì„±**ì„ í™•ë³´í•˜ëŠ” ë° ì´ˆì ì„ ë§ì·„ìŠµë‹ˆë‹¤.

---

## ğŸ”§ 2. ì‹œìŠ¤í…œ êµ¬ì„±

ë¡œë´‡ë‹¨ì€ ë‹¤ìŒ ìš”ì†Œë¡œ ë™ì‘í•©ë‹ˆë‹¤.

- **z8015 â€” Device & Bringup Layer (`z8015/src/*`)**
  - **ëª¨í„° ë“œë¼ì´ë²„** (ì˜ˆ: ZLAC8015D, RS-485) â†’ `cmd_vel` ë³€í™˜, ì†ë„/ê°€ì† í•œê³„ ì ìš©, í†µì‹  ì˜ˆì™¸ ì¬ì‹œë„
  - **IMU** (Witmotion ê³„ì—´) â†’ `sensor_msgs/Imu` ë°œí–‰, EKFì— yaw ì•ˆì •ì„± ì œê³µ
  - **LiDAR í•„í„°** (`lidar_filter`) â†’ ê°ë„ êµ¬ê°„ë³„ min/max rangeë¡œ ê·¼ì ‘ ë°˜ì‚¬Â·ì°¨ì²´ ê°„ì„­ ì œê±° â†’ **`/filtered_scan`** í‘œì¤€í™”
  - **ì¡°ì´ìŠ¤í‹±/ìˆ˜ë™ ëª¨ë“œ** â†’ ì´ˆê¸° ì…‹ì—…Â·ë¹„ìƒ ìš´ìš© ê²½ë¡œ ì œê³µ
  - **udev rules** â†’ `/dev/driver`, `/dev/rplidar`, `/dev/mwahrs` ê³ ì • symlink
  - **ë¸Œë§ì—… ëŸ°ì¹˜** (`z8015_mobile_bringup`) â†’ EKF/TF/`twist_mux` í¬í•¨í•˜ì—¬ ìƒìœ„ ìŠ¤íƒì— ì¼ê´€ëœ í† í”½Â·TF ê³µê¸‰

- **State Estimation (robot_localization)**  
  Odom + IMU ìœµí•©ìœ¼ë¡œ `map â†’ odom â†’ base_link` TF ì²´ì¸ ì•ˆì •í™”

- **SLAM (Cartographer / SLAM Toolbox)**  
  ì‹¤ë‚´ ë§µ ìƒì„±(ë§µí•‘ ëª¨ë“œ) ë° loop-closure  
  Localization ëª¨ë“œì—ì„œ **AMCL**ë¡œ ë¹ ë¥´ê³  ê²¬ê³ í•œ ìœ„ì¹˜ ì¶”ì •

- **Navigation (Nav2 + zeta_navigation2)**  
  Planner/Controller/Recovery/BT ì»¤ìŠ¤í…€  
  ì»¨í…Œì´ë„ˆ ê¸°ë™ ì „ **í† í”½ í—¬ìŠ¤ì²´í¬**(ë¯¸ì¤€ë¹„ ì‹œ ë¹ ë¥¸ ì‹¤íŒ¨)ë¡œ ìš´ì˜ ì•ˆì „ì„± í™•ë³´

- **FSM Waypoint (nav2/fsm_waypoint)**  
  Bringup/ê²½ë¡œ/ì¬ê²½ë¡œ/ì¥ì• /ë¦¬ì»¤ë²„ë¦¬ **ìƒíƒœ ê¸°ê³„**  
  ì£¼í–‰ ì‚¬ì´í´ ì œì–´ ë° í…”ë ˆë©”íŠ¸ë¦¬ ë°œí–‰

- **ìš´ì˜ ìŠ¤í¬ë¦½íŠ¸ (`scripts/*`) & PM2**  
  USB ê³ ì • symlink(udev)ì™€ **í”„ë¡œì„¸ìŠ¤ ê°ì‹œ/ìë™ ì¬ì‹œì‘**, **í† í”½ ë ˆì´íŠ¸ ê¸°ë°˜ í—¬ìŠ¤ì²´í¬**

- **(ê¶Œì¥) Safety ë ˆì´ì–´**  
  ì´ˆìŒíŒŒ/IR â†’ `twist_mux` **lock** ì—°ê³„(E-Stop)  
  180Â° ë³´ì™„ì„ ìœ„í•´ **í›„ì§„ ì œí•œ/ê°ì†** ë° **íšŒì „ í›„ ì „ì§„** íŒ¨í„´

---

## ğŸ”€ 3. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ & ë°ì´í„° íë¦„

```mermaid
flowchart LR
  subgraph Sensors
    L["LiDAR"] -->|/scan| F1["LiDAR Filter"]
    I["IMU"] --> E["EKF"]
    O["Wheel Odom"] --> E
  end

  F1 -->|/filtered_scan| S["SLAM / AMCL"]
  E -->|TF map-odom-base_link| S
  S -->|pose/map| N["Nav2"]
  N -->|cmd_vel| M["Motor Driver"]

  subgraph Orchestration
    P["PM2"] --> B["Bringup / SLAM / Nav2"]
    W["FSM"] --> N
    N -->|feedback/result| W
  end
```